{"meta":{"title":"Andy Luo","subtitle":null,"description":null,"author":"Andy Luo","url":"http://www.mluoky.com","root":"/"},"pages":[],"posts":[{"title":"zabbix 监控 tomcat","slug":"zabbix-monitor-tomcat","date":"un44fin44","updated":"un44fin44","comments":true,"path":"2019/05/09/zabbix-monitor-tomcat/","link":"","permalink":"http://www.mluoky.com/2019/05/09/zabbix-monitor-tomcat/","excerpt":"","text":"1、安装zabbixzabbix server 的安装 源码安装：1./configure --prefix=/app/zabbix/ --enable-server --enable-agent --with-mysql --enable-ipv6 --with-net-snmp --with-libcurl --with-libxml2 --enable-java --with-ssh2 编辑zabbix/sbin/zabbix_java/settings.sh 配置文件 12345[root@manage-server]# grep -v \"^#\" settings.sh |grep -v \"^$\"LISTEN_IP=\"10.252.80.196\"LISTEN_PORT=10052PID_FILE=\"/tmp/zabbix_java.pid\" START_POLLERS=5 然后启动 编辑zabbix/etc/zabbix_server.conf 2、安装java环境1234export JAVA_HOME=/app/jdk1.8.0_60export PATH=$JAVA_HOME/bin:$PATHexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarexport PATH=$PATH:$JAVA_HOME/bin 3、下载jar包启动tomcat下载 catalina-jmx-remote.jar 不然后面启动的时候会报错。 下载地址：http://pan.baidu.com/s/1o6EePi6 放在tomcat/lib 目录下 不然会报如下错误： 4、修改tomcat server.xml配置文件，添加以下内容：1&lt;Listener className=\"org.apache.catalina.mbeans.JmxRemoteLifecycleListener\" rmiRegistryPortPlatform=\"12345\" rmiServerPortPlatform=\"12346\"/&gt; 如下图： —–这里的Port要和zabbix服务器定义的监听jmx端口保持一致 5、修改tomcat/bin目录下catalina.sh，添加以下内容：1CATALINA_OPTS=\"-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.rmi.server.hostname=IP\" 如下图： 备注（192.168.85.128是客户端ip地址，即tomcat本身ip） —–这里的Port要和zabbix服务器定义的监听jmx端口保持一致 6、重启tomcat 7、测试需要的jar包下载cmdline-jmxclient-0.10.3.jar 下载地址：http://pan.baidu.com/s/1kT4H4nt 测试如下： 123456[root@manage-server app]# java -jar cmdline-jmxclient-0.10.3.jar - 10.252.117.233:12345 \"java.lang:type=Memory\" HeapMemoryUsage10/26/2015 19:34:24 +0800 org.archive.jmx.Client HeapMemoryUsage: committed: 1311113216init: 1073741824max: 1908932608used: 160932760","categories":[],"tags":[],"keywords":""}]}